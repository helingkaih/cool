{"ast":null,"code":"import _classCallCheck from \"F:/qiankun/qiankun-angular/node_modules/@angular-builders/custom-webpack/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:/qiankun/qiankun-angular/node_modules/@angular-builders/custom-webpack/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { __decorate, __metadata } from 'tslib';\nimport { Platform, PlatformModule } from '@angular/cdk/platform';\nimport { EventEmitter, Component, ChangeDetectionStrategy, ViewEncapsulation, ElementRef, ChangeDetectorRef, Input, Output, ViewChild, NgModule } from '@angular/core';\nimport { NzConfigService, WithConfig } from 'ng-zorro-antd/core/config';\nimport { InputNumber } from 'ng-zorro-antd/core/util';\nimport { BidiModule } from '@angular/cdk/bidi';\nimport { CommonModule } from '@angular/common';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from 'ng-zorro-antd/core/config';\nimport * as ɵngcc2 from '@angular/cdk/platform';\nimport * as ɵngcc3 from '@angular/common';\nimport * as ɵngcc4 from 'ng-zorro-antd/icon';\nvar _c0 = [\"textEl\"];\n\nfunction NzAvatarComponent_i_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"i\", 3);\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"nzType\", ctx_r0.nzIcon);\n  }\n}\n\nfunction NzAvatarComponent_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r4 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"img\", 4);\n    ɵngcc0.ɵɵlistener(\"error\", function NzAvatarComponent_img_1_Template_img_error_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r4);\n      var ctx_r3 = ɵngcc0.ɵɵnextContext();\n      return ctx_r3.imgError($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r1.nzSrc, ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵattribute(\"srcset\", ctx_r1.nzSrcSet, ɵngcc0.ɵɵsanitizeUrl)(\"alt\", ctx_r1.nzAlt);\n  }\n}\n\nfunction NzAvatarComponent_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 5, 6);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngStyle\", ctx_r2.textStyles);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r2.nzText);\n  }\n}\n\nvar _c1 = [\"*\"];\nvar NZ_CONFIG_MODULE_NAME = 'avatar';\n\nvar NzAvatarComponent = /*@__PURE__*/function () {\n  var NzAvatarComponent = /*#__PURE__*/function () {\n    function NzAvatarComponent(nzConfigService, elementRef, cdr, platform) {\n      _classCallCheck(this, NzAvatarComponent);\n\n      this.nzConfigService = nzConfigService;\n      this.elementRef = elementRef;\n      this.cdr = cdr;\n      this.platform = platform;\n      this._nzModuleName = NZ_CONFIG_MODULE_NAME;\n      this.nzShape = 'circle';\n      this.nzSize = 'default';\n      this.nzGap = 4;\n      this.nzError = new EventEmitter();\n      this.hasText = false;\n      this.hasSrc = true;\n      this.hasIcon = false;\n      this.textStyles = {};\n      this.classMap = {};\n      this.customSize = null;\n      this.el = this.elementRef.nativeElement; // TODO: move to host after View Engine deprecation\n\n      this.elementRef.nativeElement.classList.add('ant-avatar');\n    }\n\n    _createClass(NzAvatarComponent, [{\n      key: \"imgError\",\n      value: function imgError($event) {\n        this.nzError.emit($event);\n\n        if (!$event.defaultPrevented) {\n          this.hasSrc = false;\n          this.hasIcon = false;\n          this.hasText = false;\n\n          if (this.nzIcon) {\n            this.hasIcon = true;\n          } else if (this.nzText) {\n            this.hasText = true;\n          }\n\n          this.cdr.detectChanges();\n          this.setSizeStyle();\n          this.notifyCalc();\n        }\n      }\n    }, {\n      key: \"ngOnChanges\",\n      value: function ngOnChanges() {\n        this.hasText = !this.nzSrc && !!this.nzText;\n        this.hasIcon = !this.nzSrc && !!this.nzIcon;\n        this.hasSrc = !!this.nzSrc;\n        this.setSizeStyle();\n        this.notifyCalc();\n      }\n    }, {\n      key: \"calcStringSize\",\n      value: function calcStringSize() {\n        if (!this.hasText) {\n          return;\n        }\n\n        var childrenWidth = this.textEl.nativeElement.offsetWidth;\n        var avatarWidth = this.el.getBoundingClientRect().width;\n        var offset = this.nzGap * 2 < avatarWidth ? this.nzGap * 2 : 8;\n        var scale = avatarWidth - offset < childrenWidth ? (avatarWidth - offset) / childrenWidth : 1;\n        this.textStyles = {\n          transform: \"scale(\".concat(scale, \") translateX(-50%)\")\n        };\n\n        if (this.customSize) {\n          Object.assign(this.textStyles, {\n            lineHeight: this.customSize\n          });\n        }\n\n        this.cdr.detectChanges();\n      }\n    }, {\n      key: \"notifyCalc\",\n      value: function notifyCalc() {\n        var _this = this;\n\n        // If use ngAfterViewChecked, always demands more computations, so......\n        if (this.platform.isBrowser) {\n          setTimeout(function () {\n            _this.calcStringSize();\n          });\n        }\n      }\n    }, {\n      key: \"setSizeStyle\",\n      value: function setSizeStyle() {\n        if (typeof this.nzSize === 'number') {\n          this.customSize = \"\".concat(this.nzSize, \"px\");\n        } else {\n          this.customSize = null;\n        }\n\n        this.cdr.markForCheck();\n      }\n    }]);\n\n    return NzAvatarComponent;\n  }();\n\n  NzAvatarComponent.ɵfac = function NzAvatarComponent_Factory(t) {\n    return new (t || NzAvatarComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.Platform));\n  };\n\n  NzAvatarComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n    type: NzAvatarComponent,\n    selectors: [[\"nz-avatar\"]],\n    viewQuery: function NzAvatarComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 1);\n      }\n\n      if (rf & 2) {\n        var _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.textEl = _t.first);\n      }\n    },\n    hostVars: 20,\n    hostBindings: function NzAvatarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵstyleProp(\"width\", ctx.customSize)(\"height\", ctx.customSize)(\"line-height\", ctx.customSize)(\"font-size\", ctx.hasIcon && ctx.customSize ? ctx.nzSize / 2 : null, \"px\");\n        ɵngcc0.ɵɵclassProp(\"ant-avatar-lg\", ctx.nzSize === \"large\")(\"ant-avatar-sm\", ctx.nzSize === \"small\")(\"ant-avatar-square\", ctx.nzShape === \"square\")(\"ant-avatar-circle\", ctx.nzShape === \"circle\")(\"ant-avatar-icon\", ctx.nzIcon)(\"ant-avatar-image\", ctx.hasSrc);\n      }\n    },\n    inputs: {\n      nzShape: \"nzShape\",\n      nzSize: \"nzSize\",\n      nzGap: \"nzGap\",\n      nzText: \"nzText\",\n      nzSrc: \"nzSrc\",\n      nzSrcSet: \"nzSrcSet\",\n      nzAlt: \"nzAlt\",\n      nzIcon: \"nzIcon\"\n    },\n    outputs: {\n      nzError: \"nzError\"\n    },\n    exportAs: [\"nzAvatar\"],\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 3,\n    vars: 3,\n    consts: [[\"nz-icon\", \"\", 3, \"nzType\", 4, \"ngIf\"], [3, \"src\", \"error\", 4, \"ngIf\"], [\"class\", \"ant-avatar-string\", 3, \"ngStyle\", 4, \"ngIf\"], [\"nz-icon\", \"\", 3, \"nzType\"], [3, \"src\", \"error\"], [1, \"ant-avatar-string\", 3, \"ngStyle\"], [\"textEl\", \"\"]],\n    template: function NzAvatarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NzAvatarComponent_i_0_Template, 1, 1, \"i\", 0);\n        ɵngcc0.ɵɵtemplate(1, NzAvatarComponent_img_1_Template, 1, 3, \"img\", 1);\n        ɵngcc0.ɵɵtemplate(2, NzAvatarComponent_span_2_Template, 3, 2, \"span\", 2);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.nzIcon && ctx.hasIcon);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.nzSrc && ctx.hasSrc);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.nzText && ctx.hasText);\n      }\n    },\n    directives: [ɵngcc3.NgIf, ɵngcc4.NzIconDirective, ɵngcc3.NgStyle],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n\n  __decorate([WithConfig(), __metadata(\"design:type\", String)], NzAvatarComponent.prototype, \"nzShape\", void 0);\n\n  __decorate([WithConfig(), __metadata(\"design:type\", Object)], NzAvatarComponent.prototype, \"nzSize\", void 0);\n\n  __decorate([WithConfig(), InputNumber(), __metadata(\"design:type\", Object)], NzAvatarComponent.prototype, \"nzGap\", void 0);\n\n  return NzAvatarComponent;\n}();\n\nvar NzAvatarGroupComponent = /*@__PURE__*/function () {\n  var NzAvatarGroupComponent = function NzAvatarGroupComponent() {\n    _classCallCheck(this, NzAvatarGroupComponent);\n  };\n\n  NzAvatarGroupComponent.ɵfac = function NzAvatarGroupComponent_Factory(t) {\n    return new (t || NzAvatarGroupComponent)();\n  };\n\n  NzAvatarGroupComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n    type: NzAvatarGroupComponent,\n    selectors: [[\"nz-avatar-group\"]],\n    hostAttrs: [1, \"ant-avatar-group\"],\n    exportAs: [\"nzAvatarGroup\"],\n    ngContentSelectors: _c1,\n    decls: 1,\n    vars: 0,\n    template: function NzAvatarGroupComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NzAvatarGroupComponent;\n}();\n\nvar NzAvatarModule = /*@__PURE__*/function () {\n  var NzAvatarModule = function NzAvatarModule() {\n    _classCallCheck(this, NzAvatarModule);\n  };\n\n  NzAvatarModule.ɵfac = function NzAvatarModule_Factory(t) {\n    return new (t || NzAvatarModule)();\n  };\n\n  NzAvatarModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({\n    type: NzAvatarModule\n  });\n  NzAvatarModule.ɵinj = ɵngcc0.ɵɵdefineInjector({\n    imports: [[BidiModule, CommonModule, NzIconModule, PlatformModule]]\n  });\n  return NzAvatarModule;\n}();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NzAvatarModule, {\n    declarations: function declarations() {\n      return [NzAvatarComponent, NzAvatarGroupComponent];\n    },\n    imports: function imports() {\n      return [BidiModule, CommonModule, NzIconModule, PlatformModule];\n    },\n    exports: function exports() {\n      return [NzAvatarComponent, NzAvatarGroupComponent];\n    }\n  });\n})();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { NzAvatarComponent, NzAvatarModule, NzAvatarGroupComponent as ɵa }; //# sourceMappingURL=ng-zorro-antd-avatar.js.map","map":null,"metadata":{},"sourceType":"module"}