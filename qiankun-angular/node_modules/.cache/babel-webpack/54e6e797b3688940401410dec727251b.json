{"ast":null,"code":"import _classCallCheck from \"F:/qiankun/qiankun-angular/node_modules/@angular-builders/custom-webpack/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:/qiankun/qiankun-angular/node_modules/@angular-builders/custom-webpack/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { __decorate, __metadata } from 'tslib';\nimport { Directionality, BidiModule } from '@angular/cdk/bidi';\nimport { Platform, PlatformModule } from '@angular/cdk/platform';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport { EventEmitter, Component, ChangeDetectionStrategy, ViewEncapsulation, Inject, ChangeDetectorRef, NgZone, Optional, Input, Output, NgModule } from '@angular/core';\nimport { fadeMotion } from 'ng-zorro-antd/core/animation';\nimport { NzConfigService, WithConfig } from 'ng-zorro-antd/core/config';\nimport { NzScrollService } from 'ng-zorro-antd/core/services';\nimport { InputNumber } from 'ng-zorro-antd/core/util';\nimport { Subject, fromEvent } from 'rxjs';\nimport { takeUntil, throttleTime } from 'rxjs/operators';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from 'ng-zorro-antd/core/config';\nimport * as ɵngcc2 from 'ng-zorro-antd/core/services';\nimport * as ɵngcc3 from '@angular/cdk/platform';\nimport * as ɵngcc4 from '@angular/cdk/bidi';\nimport * as ɵngcc5 from '@angular/common';\nimport * as ɵngcc6 from 'ng-zorro-antd/icon';\n\nfunction NzBackTopComponent_div_0_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 5);\n    ɵngcc0.ɵɵelement(2, \"i\", 6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nfunction NzBackTopComponent_div_0_ng_template_3_Template(rf, ctx) {}\n\nfunction NzBackTopComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r5 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 1);\n    ɵngcc0.ɵɵlistener(\"click\", function NzBackTopComponent_div_0_Template_div_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      var ctx_r4 = ɵngcc0.ɵɵnextContext();\n      return ctx_r4.clickBackTop();\n    });\n    ɵngcc0.ɵɵtemplate(1, NzBackTopComponent_div_0_ng_template_1_Template, 3, 0, \"ng-template\", null, 2, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵtemplate(3, NzBackTopComponent_div_0_ng_template_3_Template, 0, 0, \"ng-template\", 3);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var _r1 = ɵngcc0.ɵɵreference(2);\n\n    var ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"ant-back-top-rtl\", ctx_r0.dir === \"rtl\");\n    ɵngcc0.ɵɵproperty(\"@fadeMotion\", undefined);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r0.nzTemplate || _r1);\n  }\n}\n\nvar NZ_CONFIG_MODULE_NAME = 'backTop';\n\nvar NzBackTopComponent = /*@__PURE__*/function () {\n  var NzBackTopComponent = /*#__PURE__*/function () {\n    function NzBackTopComponent(doc, nzConfigService, scrollSrv, platform, cd, zone, cdr, directionality) {\n      _classCallCheck(this, NzBackTopComponent);\n\n      this.doc = doc;\n      this.nzConfigService = nzConfigService;\n      this.scrollSrv = scrollSrv;\n      this.platform = platform;\n      this.cd = cd;\n      this.zone = zone;\n      this.cdr = cdr;\n      this.directionality = directionality;\n      this._nzModuleName = NZ_CONFIG_MODULE_NAME;\n      this.scrollListenerDestroy$ = new Subject();\n      this.destroy$ = new Subject();\n      this.target = null;\n      this.visible = false;\n      this.dir = 'ltr';\n      this.nzVisibilityHeight = 400;\n      this.nzDuration = 450;\n      this.nzClick = new EventEmitter();\n      this.dir = this.directionality.value;\n    }\n\n    _createClass(NzBackTopComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        var _a;\n\n        this.registerScrollEvent();\n        (_a = this.directionality.change) === null || _a === void 0 ? void 0 : _a.pipe(takeUntil(this.destroy$)).subscribe(function (direction) {\n          _this.dir = direction;\n\n          _this.cdr.detectChanges();\n        });\n        this.dir = this.directionality.value;\n      }\n    }, {\n      key: \"clickBackTop\",\n      value: function clickBackTop() {\n        this.scrollSrv.scrollTo(this.getTarget(), 0, {\n          duration: this.nzDuration\n        });\n        this.nzClick.emit(true);\n      }\n    }, {\n      key: \"getTarget\",\n      value: function getTarget() {\n        return this.target || window;\n      }\n    }, {\n      key: \"handleScroll\",\n      value: function handleScroll() {\n        if (this.visible === this.scrollSrv.getScroll(this.getTarget()) > this.nzVisibilityHeight) {\n          return;\n        }\n\n        this.visible = !this.visible;\n        this.cd.detectChanges();\n      }\n    }, {\n      key: \"registerScrollEvent\",\n      value: function registerScrollEvent() {\n        var _this2 = this;\n\n        if (!this.platform.isBrowser) {\n          return;\n        }\n\n        this.scrollListenerDestroy$.next();\n        this.handleScroll();\n        this.zone.runOutsideAngular(function () {\n          fromEvent(_this2.getTarget(), 'scroll').pipe(throttleTime(50), takeUntil(_this2.scrollListenerDestroy$)).subscribe(function () {\n            return _this2.handleScroll();\n          });\n        });\n      }\n    }, {\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {\n        this.scrollListenerDestroy$.next();\n        this.scrollListenerDestroy$.complete();\n        this.destroy$.next();\n        this.destroy$.complete();\n      }\n    }, {\n      key: \"ngOnChanges\",\n      value: function ngOnChanges(changes) {\n        var nzTarget = changes.nzTarget;\n\n        if (nzTarget) {\n          this.target = typeof this.nzTarget === 'string' ? this.doc.querySelector(this.nzTarget) : this.nzTarget;\n          this.registerScrollEvent();\n        }\n      }\n    }]);\n\n    return NzBackTopComponent;\n  }();\n\n  NzBackTopComponent.ɵfac = function NzBackTopComponent_Factory(t) {\n    return new (t || NzBackTopComponent)(ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NzScrollService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.Platform), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.Directionality, 8));\n  };\n\n  NzBackTopComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n    type: NzBackTopComponent,\n    selectors: [[\"nz-back-top\"]],\n    inputs: {\n      nzVisibilityHeight: \"nzVisibilityHeight\",\n      nzDuration: \"nzDuration\",\n      nzTemplate: \"nzTemplate\",\n      nzTarget: \"nzTarget\"\n    },\n    outputs: {\n      nzClick: \"nzClick\"\n    },\n    exportAs: [\"nzBackTop\"],\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"ant-back-top\", 3, \"ant-back-top-rtl\", \"click\", 4, \"ngIf\"], [1, \"ant-back-top\", 3, \"click\"], [\"defaultContent\", \"\"], [3, \"ngTemplateOutlet\"], [1, \"ant-back-top-content\"], [1, \"ant-back-top-icon\"], [\"nz-icon\", \"\", \"nzType\", \"vertical-align-top\"]],\n    template: function NzBackTopComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NzBackTopComponent_div_0_Template, 4, 4, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.visible);\n      }\n    },\n    directives: [ɵngcc5.NgIf, ɵngcc5.NgTemplateOutlet, ɵngcc6.NzIconDirective],\n    encapsulation: 2,\n    data: {\n      animation: [fadeMotion]\n    },\n    changeDetection: 0\n  });\n\n  __decorate([WithConfig(), InputNumber(), __metadata(\"design:type\", Number)], NzBackTopComponent.prototype, \"nzVisibilityHeight\", void 0);\n\n  __decorate([InputNumber(), __metadata(\"design:type\", Number)], NzBackTopComponent.prototype, \"nzDuration\", void 0);\n\n  return NzBackTopComponent;\n}();\n\nvar NzBackTopModule = /*@__PURE__*/function () {\n  var NzBackTopModule = function NzBackTopModule() {\n    _classCallCheck(this, NzBackTopModule);\n  };\n\n  NzBackTopModule.ɵfac = function NzBackTopModule_Factory(t) {\n    return new (t || NzBackTopModule)();\n  };\n\n  NzBackTopModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({\n    type: NzBackTopModule\n  });\n  NzBackTopModule.ɵinj = ɵngcc0.ɵɵdefineInjector({\n    imports: [[BidiModule, CommonModule, PlatformModule, NzIconModule]]\n  });\n  return NzBackTopModule;\n}();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NzBackTopModule, {\n    declarations: function declarations() {\n      return [NzBackTopComponent];\n    },\n    imports: function imports() {\n      return [BidiModule, CommonModule, PlatformModule, NzIconModule];\n    },\n    exports: function exports() {\n      return [NzBackTopComponent];\n    }\n  });\n})();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { NzBackTopComponent, NzBackTopModule }; //# sourceMappingURL=ng-zorro-antd-back-top.js.map","map":null,"metadata":{},"sourceType":"module"}