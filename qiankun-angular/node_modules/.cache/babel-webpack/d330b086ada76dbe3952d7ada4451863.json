{"ast":null,"code":"import _defineProperty from \"F:/qiankun/qiankun-angular/node_modules/@angular-builders/custom-webpack/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"F:/qiankun/qiankun-angular/node_modules/@angular-builders/custom-webpack/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:/qiankun/qiankun-angular/node_modules/@angular-builders/custom-webpack/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { __decorate, __metadata } from 'tslib';\nimport { Directionality, BidiModule } from '@angular/cdk/bidi';\nimport { RIGHT_ARROW, LEFT_ARROW } from '@angular/cdk/keycodes';\nimport { EventEmitter, Component, ChangeDetectionStrategy, ViewEncapsulation, forwardRef, Renderer2, ChangeDetectorRef, Optional, ViewChild, Input, Output, NgModule } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { NzConfigService, WithConfig } from 'ng-zorro-antd/core/config';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { InputBoolean, InputNumber } from 'ng-zorro-antd/core/util';\nimport { CommonModule } from '@angular/common';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzToolTipModule } from 'ng-zorro-antd/tooltip';\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from 'ng-zorro-antd/core/config';\nimport * as ɵngcc2 from '@angular/cdk/bidi';\nimport * as ɵngcc3 from '@angular/common';\nimport * as ɵngcc4 from 'ng-zorro-antd/tooltip';\nimport * as ɵngcc5 from 'ng-zorro-antd/icon';\nvar _c0 = [\"ulElement\"];\n\nfunction NzRateComponent_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r5 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"li\", 3);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 4);\n    ɵngcc0.ɵɵlistener(\"itemHover\", function NzRateComponent_li_2_Template_div_itemHover_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      var i_r3 = ctx.index;\n      var ctx_r4 = ɵngcc0.ɵɵnextContext();\n      return ctx_r4.onItemHover(i_r3, $event);\n    })(\"itemClick\", function NzRateComponent_li_2_Template_div_itemClick_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      var i_r3 = ctx.index;\n      var ctx_r6 = ɵngcc0.ɵɵnextContext();\n      return ctx_r6.onItemClick(i_r3, $event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var i_r3 = ctx.index;\n    var ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r1.starStyleArray[i_r3] || \"\")(\"nzTooltipTitle\", ctx_r1.nzTooltips[i_r3]);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"allowHalf\", ctx_r1.nzAllowHalf)(\"character\", ctx_r1.nzCharacter);\n  }\n}\n\nvar _c1 = [\"nz-rate-item\", \"\"];\n\nfunction NzRateItemComponent_ng_template_1_Template(rf, ctx) {}\n\nfunction NzRateItemComponent_ng_template_3_Template(rf, ctx) {}\n\nfunction NzRateItemComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"i\", 4);\n  }\n}\n\nvar NZ_CONFIG_MODULE_NAME = 'rate';\n\nvar NzRateComponent = /*@__PURE__*/function () {\n  var NzRateComponent = /*#__PURE__*/function () {\n    function NzRateComponent(nzConfigService, renderer, cdr, directionality) {\n      _classCallCheck(this, NzRateComponent);\n\n      this.nzConfigService = nzConfigService;\n      this.renderer = renderer;\n      this.cdr = cdr;\n      this.directionality = directionality;\n      this._nzModuleName = NZ_CONFIG_MODULE_NAME;\n      this.nzAllowClear = true;\n      this.nzAllowHalf = false;\n      this.nzDisabled = false;\n      this.nzAutoFocus = false;\n      this.nzCount = 5;\n      this.nzTooltips = [];\n      this.nzOnBlur = new EventEmitter();\n      this.nzOnFocus = new EventEmitter();\n      this.nzOnHoverChange = new EventEmitter();\n      this.nzOnKeyDown = new EventEmitter();\n      this.classMap = {};\n      this.starArray = [];\n      this.starStyleArray = [];\n      this.dir = 'ltr';\n      this.destroy$ = new Subject();\n      this.hasHalf = false;\n      this.hoverValue = 0;\n      this.isFocused = false;\n      this._value = 0;\n\n      this.onChange = function () {\n        return null;\n      };\n\n      this.onTouched = function () {\n        return null;\n      };\n    }\n\n    _createClass(NzRateComponent, [{\n      key: \"nzValue\",\n      get: function get() {\n        return this._value;\n      },\n      set: function set(input) {\n        if (this._value === input) {\n          return;\n        }\n\n        this._value = input;\n        this.hasHalf = !Number.isInteger(input);\n        this.hoverValue = Math.ceil(input);\n      }\n    }, {\n      key: \"ngOnChanges\",\n      value: function ngOnChanges(changes) {\n        var nzAutoFocus = changes.nzAutoFocus,\n            nzCount = changes.nzCount,\n            nzValue = changes.nzValue;\n\n        if (nzAutoFocus && !nzAutoFocus.isFirstChange()) {\n          var el = this.ulElement.nativeElement;\n\n          if (this.nzAutoFocus && !this.nzDisabled) {\n            this.renderer.setAttribute(el, 'autofocus', 'autofocus');\n          } else {\n            this.renderer.removeAttribute(el, 'autofocus');\n          }\n        }\n\n        if (nzCount) {\n          this.updateStarArray();\n        }\n\n        if (nzValue) {\n          this.updateStarStyle();\n        }\n      }\n    }, {\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        var _a;\n\n        this.nzConfigService.getConfigChangeEventForComponent(NZ_CONFIG_MODULE_NAME).pipe(takeUntil(this.destroy$)).subscribe(function () {\n          return _this.cdr.markForCheck();\n        });\n        (_a = this.directionality.change) === null || _a === void 0 ? void 0 : _a.pipe(takeUntil(this.destroy$)).subscribe(function (direction) {\n          _this.dir = direction;\n\n          _this.cdr.detectChanges();\n        });\n        this.dir = this.directionality.value;\n      }\n    }, {\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n      }\n    }, {\n      key: \"onItemClick\",\n      value: function onItemClick(index, isHalf) {\n        if (this.nzDisabled) {\n          return;\n        }\n\n        this.hoverValue = index + 1;\n        var actualValue = isHalf ? index + 0.5 : index + 1;\n\n        if (this.nzValue === actualValue) {\n          if (this.nzAllowClear) {\n            this.nzValue = 0;\n            this.onChange(this.nzValue);\n          }\n        } else {\n          this.nzValue = actualValue;\n          this.onChange(this.nzValue);\n        }\n\n        this.updateStarStyle();\n      }\n    }, {\n      key: \"onItemHover\",\n      value: function onItemHover(index, isHalf) {\n        if (this.nzDisabled || this.hoverValue === index + 1 && isHalf === this.hasHalf) {\n          return;\n        }\n\n        this.hoverValue = index + 1;\n        this.hasHalf = isHalf;\n        this.nzOnHoverChange.emit(this.hoverValue);\n        this.updateStarStyle();\n      }\n    }, {\n      key: \"onRateLeave\",\n      value: function onRateLeave() {\n        this.hasHalf = !Number.isInteger(this.nzValue);\n        this.hoverValue = Math.ceil(this.nzValue);\n        this.updateStarStyle();\n      }\n    }, {\n      key: \"onFocus\",\n      value: function onFocus(e) {\n        this.isFocused = true;\n        this.nzOnFocus.emit(e);\n      }\n    }, {\n      key: \"onBlur\",\n      value: function onBlur(e) {\n        this.isFocused = false;\n        this.nzOnBlur.emit(e);\n      }\n    }, {\n      key: \"focus\",\n      value: function focus() {\n        this.ulElement.nativeElement.focus();\n      }\n    }, {\n      key: \"blur\",\n      value: function blur() {\n        this.ulElement.nativeElement.blur();\n      }\n    }, {\n      key: \"onKeyDown\",\n      value: function onKeyDown(e) {\n        var oldVal = this.nzValue;\n\n        if (e.keyCode === RIGHT_ARROW && this.nzValue < this.nzCount) {\n          this.nzValue += this.nzAllowHalf ? 0.5 : 1;\n        } else if (e.keyCode === LEFT_ARROW && this.nzValue > 0) {\n          this.nzValue -= this.nzAllowHalf ? 0.5 : 1;\n        }\n\n        if (oldVal !== this.nzValue) {\n          this.onChange(this.nzValue);\n          this.nzOnKeyDown.emit(e);\n          this.updateStarStyle();\n          this.cdr.markForCheck();\n        }\n      }\n    }, {\n      key: \"updateStarArray\",\n      value: function updateStarArray() {\n        this.starArray = Array(this.nzCount).fill(0).map(function (_, i) {\n          return i;\n        });\n        this.updateStarStyle();\n      }\n    }, {\n      key: \"updateStarStyle\",\n      value: function updateStarStyle() {\n        var _this2 = this;\n\n        this.starStyleArray = this.starArray.map(function (i) {\n          var _ref;\n\n          var prefix = 'ant-rate-star';\n          var value = i + 1;\n          return _ref = {}, _defineProperty(_ref, \"\".concat(prefix, \"-full\"), value < _this2.hoverValue || !_this2.hasHalf && value === _this2.hoverValue), _defineProperty(_ref, \"\".concat(prefix, \"-half\"), _this2.hasHalf && value === _this2.hoverValue), _defineProperty(_ref, \"\".concat(prefix, \"-active\"), _this2.hasHalf && value === _this2.hoverValue), _defineProperty(_ref, \"\".concat(prefix, \"-zero\"), value > _this2.hoverValue), _defineProperty(_ref, \"\".concat(prefix, \"-focused\"), _this2.hasHalf && value === _this2.hoverValue && _this2.isFocused), _ref;\n        });\n      }\n    }, {\n      key: \"writeValue\",\n      value: function writeValue(value) {\n        this.nzValue = value || 0;\n        this.updateStarArray();\n        this.cdr.markForCheck();\n      }\n    }, {\n      key: \"setDisabledState\",\n      value: function setDisabledState(isDisabled) {\n        this.nzDisabled = isDisabled;\n      }\n    }, {\n      key: \"registerOnChange\",\n      value: function registerOnChange(fn) {\n        this.onChange = fn;\n      }\n    }, {\n      key: \"registerOnTouched\",\n      value: function registerOnTouched(fn) {\n        this.onTouched = fn;\n      }\n    }]);\n\n    return NzRateComponent;\n  }();\n\n  NzRateComponent.ɵfac = function NzRateComponent_Factory(t) {\n    return new (t || NzRateComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.Directionality, 8));\n  };\n\n  NzRateComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n    type: NzRateComponent,\n    selectors: [[\"nz-rate\"]],\n    viewQuery: function NzRateComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 1);\n      }\n\n      if (rf & 2) {\n        var _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.ulElement = _t.first);\n      }\n    },\n    inputs: {\n      nzAllowClear: \"nzAllowClear\",\n      nzAllowHalf: \"nzAllowHalf\",\n      nzDisabled: \"nzDisabled\",\n      nzAutoFocus: \"nzAutoFocus\",\n      nzCount: \"nzCount\",\n      nzTooltips: \"nzTooltips\",\n      nzCharacter: \"nzCharacter\"\n    },\n    outputs: {\n      nzOnBlur: \"nzOnBlur\",\n      nzOnFocus: \"nzOnFocus\",\n      nzOnHoverChange: \"nzOnHoverChange\",\n      nzOnKeyDown: \"nzOnKeyDown\"\n    },\n    exportAs: [\"nzRate\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(function () {\n        return NzRateComponent;\n      }),\n      multi: true\n    }]), ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 3,\n    vars: 7,\n    consts: [[1, \"ant-rate\", 3, \"ngClass\", \"tabindex\", \"blur\", \"focus\", \"keydown\", \"mouseleave\"], [\"ulElement\", \"\"], [\"class\", \"ant-rate-star\", \"nz-tooltip\", \"\", 3, \"ngClass\", \"nzTooltipTitle\", 4, \"ngFor\", \"ngForOf\"], [\"nz-tooltip\", \"\", 1, \"ant-rate-star\", 3, \"ngClass\", \"nzTooltipTitle\"], [\"nz-rate-item\", \"\", 3, \"allowHalf\", \"character\", \"itemHover\", \"itemClick\"]],\n    template: function NzRateComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"ul\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"blur\", function NzRateComponent_Template_ul_blur_0_listener($event) {\n          return ctx.onBlur($event);\n        })(\"focus\", function NzRateComponent_Template_ul_focus_0_listener($event) {\n          return ctx.onFocus($event);\n        })(\"keydown\", function NzRateComponent_Template_ul_keydown_0_listener($event) {\n          ctx.onKeyDown($event);\n          return $event.preventDefault();\n        })(\"mouseleave\", function NzRateComponent_Template_ul_mouseleave_0_listener($event) {\n          ctx.onRateLeave();\n          return $event.stopPropagation();\n        });\n        ɵngcc0.ɵɵtemplate(2, NzRateComponent_li_2_Template, 2, 4, \"li\", 2);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"ant-rate-disabled\", ctx.nzDisabled)(\"ant-rate-rtl\", ctx.dir === \"rtl\");\n        ɵngcc0.ɵɵproperty(\"ngClass\", ctx.classMap)(\"tabindex\", ctx.nzDisabled ? -1 : 1);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.starArray);\n      }\n    },\n    directives: function directives() {\n      return [ɵngcc3.NgClass, ɵngcc3.NgForOf, ɵngcc4.NzTooltipDirective, NzRateItemComponent];\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n\n  __decorate([WithConfig(), InputBoolean(), __metadata(\"design:type\", Boolean)], NzRateComponent.prototype, \"nzAllowClear\", void 0);\n\n  __decorate([WithConfig(), InputBoolean(), __metadata(\"design:type\", Boolean)], NzRateComponent.prototype, \"nzAllowHalf\", void 0);\n\n  __decorate([InputBoolean(), __metadata(\"design:type\", Boolean)], NzRateComponent.prototype, \"nzDisabled\", void 0);\n\n  __decorate([InputBoolean(), __metadata(\"design:type\", Boolean)], NzRateComponent.prototype, \"nzAutoFocus\", void 0);\n\n  __decorate([InputNumber(), __metadata(\"design:type\", Number)], NzRateComponent.prototype, \"nzCount\", void 0);\n\n  return NzRateComponent;\n}();\n\nvar NzRateItemComponent = /*@__PURE__*/function () {\n  var NzRateItemComponent = /*#__PURE__*/function () {\n    function NzRateItemComponent() {\n      _classCallCheck(this, NzRateItemComponent);\n\n      this.allowHalf = false;\n      this.itemHover = new EventEmitter();\n      this.itemClick = new EventEmitter();\n    }\n\n    _createClass(NzRateItemComponent, [{\n      key: \"hoverRate\",\n      value: function hoverRate(isHalf) {\n        this.itemHover.next(isHalf && this.allowHalf);\n      }\n    }, {\n      key: \"clickRate\",\n      value: function clickRate(isHalf) {\n        this.itemClick.next(isHalf && this.allowHalf);\n      }\n    }]);\n\n    return NzRateItemComponent;\n  }();\n\n  NzRateItemComponent.ɵfac = function NzRateItemComponent_Factory(t) {\n    return new (t || NzRateItemComponent)();\n  };\n\n  NzRateItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n    type: NzRateItemComponent,\n    selectors: [[\"\", \"nz-rate-item\", \"\"]],\n    inputs: {\n      allowHalf: \"allowHalf\",\n      character: \"character\"\n    },\n    outputs: {\n      itemHover: \"itemHover\",\n      itemClick: \"itemClick\"\n    },\n    exportAs: [\"nzRateItem\"],\n    attrs: _c1,\n    decls: 6,\n    vars: 2,\n    consts: [[1, \"ant-rate-star-second\", 3, \"mouseover\", \"click\"], [3, \"ngTemplateOutlet\"], [1, \"ant-rate-star-first\", 3, \"mouseover\", \"click\"], [\"defaultCharacter\", \"\"], [\"nz-icon\", \"\", \"nzType\", \"star\", \"nzTheme\", \"fill\"]],\n    template: function NzRateItemComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵlistener(\"mouseover\", function NzRateItemComponent_Template_div_mouseover_0_listener($event) {\n          ctx.hoverRate(false);\n          return $event.stopPropagation();\n        })(\"click\", function NzRateItemComponent_Template_div_click_0_listener() {\n          return ctx.clickRate(false);\n        });\n        ɵngcc0.ɵɵtemplate(1, NzRateItemComponent_ng_template_1_Template, 0, 0, \"ng-template\", 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵlistener(\"mouseover\", function NzRateItemComponent_Template_div_mouseover_2_listener($event) {\n          ctx.hoverRate(true);\n          return $event.stopPropagation();\n        })(\"click\", function NzRateItemComponent_Template_div_click_2_listener() {\n          return ctx.clickRate(true);\n        });\n        ɵngcc0.ɵɵtemplate(3, NzRateItemComponent_ng_template_3_Template, 0, 0, \"ng-template\", 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(4, NzRateItemComponent_ng_template_4_Template, 1, 0, \"ng-template\", null, 3, ɵngcc0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        var _r2 = ɵngcc0.ɵɵreference(5);\n\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx.character || _r2);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx.character || _r2);\n      }\n    },\n    directives: [ɵngcc3.NgTemplateOutlet, ɵngcc5.NzIconDirective],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n\n  __decorate([InputBoolean(), __metadata(\"design:type\", Boolean)], NzRateItemComponent.prototype, \"allowHalf\", void 0);\n\n  return NzRateItemComponent;\n}();\n\nvar NzRateModule = /*@__PURE__*/function () {\n  var NzRateModule = function NzRateModule() {\n    _classCallCheck(this, NzRateModule);\n  };\n\n  NzRateModule.ɵfac = function NzRateModule_Factory(t) {\n    return new (t || NzRateModule)();\n  };\n\n  NzRateModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({\n    type: NzRateModule\n  });\n  NzRateModule.ɵinj = ɵngcc0.ɵɵdefineInjector({\n    imports: [[BidiModule, CommonModule, NzIconModule, NzToolTipModule]]\n  });\n  return NzRateModule;\n}();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NzRateModule, {\n    declarations: function declarations() {\n      return [NzRateComponent, NzRateItemComponent];\n    },\n    imports: function imports() {\n      return [BidiModule, CommonModule, NzIconModule, NzToolTipModule];\n    },\n    exports: function exports() {\n      return [NzRateComponent];\n    }\n  });\n})();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { NzRateComponent, NzRateItemComponent, NzRateModule }; //# sourceMappingURL=ng-zorro-antd-rate.js.map","map":null,"metadata":{},"sourceType":"module"}