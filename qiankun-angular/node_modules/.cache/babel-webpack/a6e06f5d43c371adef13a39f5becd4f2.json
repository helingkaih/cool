{"ast":null,"code":"import _classCallCheck from \"F:/qiankun/qiankun-angular/node_modules/@angular-builders/custom-webpack/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:/qiankun/qiankun-angular/node_modules/@angular-builders/custom-webpack/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { __decorate, __metadata } from 'tslib';\nimport { Directionality, BidiModule } from '@angular/cdk/bidi';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport { Component, ChangeDetectionStrategy, ViewEncapsulation, EventEmitter, ChangeDetectorRef, ViewChild, Injector, Injectable, Optional, Directive, Inject, ElementRef, Input, NgModule } from '@angular/core';\nimport { NzConfigService, WithConfig } from 'ng-zorro-antd/core/config';\nimport { isNotNil, InputBoolean } from 'ng-zorro-antd/core/util';\nimport { Subject } from 'rxjs';\nimport { filter, take, takeUntil } from 'rxjs/operators';\nimport { OverlayRef, OverlayConfig, Overlay, OverlayModule } from '@angular/cdk/overlay';\nimport { ComponentPortal, PortalModule } from '@angular/cdk/portal';\nimport { ESCAPE, hasModifierKey } from '@angular/cdk/keycodes';\nimport { fadeMotion } from 'ng-zorro-antd/core/animation';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzPipesModule } from 'ng-zorro-antd/pipes';\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from 'ng-zorro-antd/core/config';\nimport * as ɵngcc2 from '@angular/cdk/overlay';\nimport * as ɵngcc3 from '@angular/common';\nimport * as ɵngcc4 from '@angular/cdk/drag-drop';\nimport * as ɵngcc5 from 'ng-zorro-antd/icon';\nimport * as ɵngcc6 from '@angular/cdk/bidi';\nvar _c0 = [\"*\"];\nvar _c1 = [\"imgRef\"];\n\nfunction NzImagePreviewComponent_li_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function NzImagePreviewComponent_li_5_Template_li_click_0_listener() {\n      var option_r3 = ctx.$implicit;\n      return option_r3.onClick();\n    });\n    ɵngcc0.ɵɵelement(1, \"span\", 10);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var option_r3 = ctx.$implicit;\n    var ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"ant-image-preview-operations-operation-disabled\", ctx_r0.zoomOutDisabled && option_r3.type === \"zoomOut\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"nzType\", option_r3.icon);\n  }\n}\n\nfunction NzImagePreviewComponent_ng_container_7_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 12, 13);\n  }\n\n  if (rf & 2) {\n    var image_r5 = ɵngcc0.ɵɵnextContext().$implicit;\n    var ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"width\", image_r5.width)(\"height\", image_r5.height)(\"transform\", ctx_r7.previewImageTransform);\n    ɵngcc0.ɵɵattribute(\"src\", image_r5.src, ɵngcc0.ɵɵsanitizeUrl)(\"alt\", image_r5.alt);\n  }\n}\n\nfunction NzImagePreviewComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NzImagePreviewComponent_ng_container_7_img_1_Template, 2, 8, \"img\", 11);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    var imageIndex_r6 = ctx.index;\n    var ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.index === imageIndex_r6);\n  }\n}\n\nfunction NzImagePreviewComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r11 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function NzImagePreviewComponent_ng_container_8_Template_div_click_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r11);\n      var ctx_r10 = ɵngcc0.ɵɵnextContext();\n      return ctx_r10.onSwitchLeft($event);\n    });\n    ɵngcc0.ɵɵelement(2, \"span\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"div\", 16);\n    ɵngcc0.ɵɵlistener(\"click\", function NzImagePreviewComponent_ng_container_8_Template_div_click_3_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r11);\n      var ctx_r12 = ɵngcc0.ɵɵnextContext();\n      return ctx_r12.onSwitchRight($event);\n    });\n    ɵngcc0.ɵɵelement(4, \"span\", 17);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"ant-image-preview-switch-left-disabled\", ctx_r2.index <= 0);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"ant-image-preview-switch-right-disabled\", ctx_r2.index >= ctx_r2.images.length - 1);\n  }\n}\n\nvar NzImageGroupComponent = /*@__PURE__*/function () {\n  var NzImageGroupComponent = /*#__PURE__*/function () {\n    function NzImageGroupComponent() {\n      _classCallCheck(this, NzImageGroupComponent);\n\n      this.images = [];\n    }\n\n    _createClass(NzImageGroupComponent, [{\n      key: \"addImage\",\n      value: function addImage(image) {\n        this.images.push(image);\n      }\n    }]);\n\n    return NzImageGroupComponent;\n  }();\n\n  NzImageGroupComponent.ɵfac = function NzImageGroupComponent_Factory(t) {\n    return new (t || NzImageGroupComponent)();\n  };\n\n  NzImageGroupComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n    type: NzImageGroupComponent,\n    selectors: [[\"nz-image-group\"]],\n    exportAs: [\"nzImageGroup\"],\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function NzImageGroupComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NzImageGroupComponent;\n}();\n\nvar FADE_CLASS_NAME_MAP = {\n  enter: 'ant-fade-enter',\n  enterActive: 'ant-fade-enter-active',\n  leave: 'ant-fade-leave',\n  leaveActive: 'ant-fade-leave-active'\n};\nvar IMAGE_PREVIEW_MASK_CLASS_NAME = 'ant-image-preview-mask';\nvar NZ_CONFIG_MODULE_NAME = 'image';\n\nvar NzImagePreviewOptions = function NzImagePreviewOptions() {\n  _classCallCheck(this, NzImagePreviewOptions);\n\n  this.nzKeyboard = true;\n  this.nzNoAnimation = false;\n  this.nzMaskClosable = true;\n  this.nzCloseOnNavigation = true;\n};\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nvar NzImagePreviewRef = /*#__PURE__*/function () {\n  function NzImagePreviewRef(previewInstance, config, overlayRef) {\n    var _this = this;\n\n    _classCallCheck(this, NzImagePreviewRef);\n\n    this.previewInstance = previewInstance;\n    this.config = config;\n    this.overlayRef = overlayRef;\n    overlayRef.keydownEvents().pipe(filter(function (event) {\n      return _this.config.nzKeyboard && event.keyCode === ESCAPE && !hasModifierKey(event);\n    })).subscribe(function (event) {\n      event.preventDefault();\n\n      _this.close();\n    });\n    overlayRef.detachments().subscribe(function () {\n      _this.overlayRef.dispose();\n    });\n    previewInstance.containerClick.pipe(take(1)).subscribe(function () {\n      _this.close();\n    });\n    previewInstance.closeClick.pipe(take(1)).subscribe(function () {\n      _this.close();\n    });\n    previewInstance.animationStateChanged.pipe(filter(function (event) {\n      return event.phaseName === 'done' && event.toState === 'leave';\n    }), take(1)).subscribe(function () {\n      _this.dispose();\n    });\n  }\n\n  _createClass(NzImagePreviewRef, [{\n    key: \"switchTo\",\n    value: function switchTo(index) {\n      this.previewInstance.switchTo(index);\n    }\n  }, {\n    key: \"next\",\n    value: function next() {\n      this.previewInstance.next();\n    }\n  }, {\n    key: \"prev\",\n    value: function prev() {\n      this.previewInstance.prev();\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.previewInstance.startLeaveAnimation();\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.overlayRef.dispose();\n    }\n  }]);\n\n  return NzImagePreviewRef;\n}();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * fit content details: https://github.com/NG-ZORRO/ng-zorro-antd/pull/6154#issuecomment-745025554\n *\n * calc position x,y point\n *\n * CASE (width <= clientWidth && height <= clientHeight):\n *\n * ------------- clientWidth -------------\n * |                                     |\n * |        ------ width ------          |\n * |        |                 |          |\n * |        |                 |          |\n * client   height            |          |\n * Height   |                 |          |\n * |        |                 |          |\n * |        -------------------          |\n * |                                     |\n * |                                     |\n * ---------------------------------------\n * fixedPosition = { x: 0, y: 0 }\n *\n *\n *\n * CASE (width > clientWidth || height > clientHeight):\n *\n * ------------- clientWidth -------------\n * |        |                            |\n * |        top                          |\n * |        |                            |\n * |--left--|--------------- width -----------------\n * |        |                                      |\n * client   |                                      |\n * Height   |                                      |\n * |        |                                      |\n * |        |                                      |\n * |        height                                 |\n * |        |                                      |\n * ---------|                                      |\n *          |                                      |\n *          |                                      |\n *          |                                      |\n *          ----------------------------------------\n *\n *\n * - left || top > 0\n *   left -> 0 || top -> 0\n *\n * - (left + width) < clientWidth || (top + height) < clientHeight\n * - left | top + width | height < clientWidth | clientHeight -> Back left | top + width | height === clientWidth | clientHeight\n *\n * DEFAULT:\n * - hold position\n *\n */\n\n\nfunction getFitContentPosition(params) {\n  var fixPos = {};\n\n  if (params.width <= params.clientWidth && params.height <= params.clientHeight) {\n    fixPos = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  if (params.width > params.clientWidth || params.height > params.clientHeight) {\n    fixPos = {\n      x: fitPoint(params.left, params.width, params.clientWidth),\n      y: fitPoint(params.top, params.height, params.clientHeight)\n    };\n  }\n\n  return fixPos;\n}\n\nfunction getOffset(node) {\n  var box = node.getBoundingClientRect();\n  var docElem = document.documentElement; // use docElem.scrollLeft to support IE\n\n  return {\n    left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || document.body.clientLeft || 0),\n    top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || document.body.clientTop || 0)\n  };\n}\n\nfunction getClientSize() {\n  var width = document.documentElement.clientWidth;\n  var height = window.innerHeight || document.documentElement.clientHeight;\n  return {\n    width: width,\n    height: height\n  };\n}\n\nfunction fitPoint(start, size, clientSize) {\n  var startAddSize = start + size;\n  var offsetStart = (size - clientSize) / 2;\n  var distance = null;\n\n  if (size > clientSize) {\n    if (start > 0) {\n      distance = offsetStart;\n    }\n\n    if (start < 0 && startAddSize < clientSize) {\n      distance = -offsetStart;\n    }\n  } else {\n    if (start < 0 || startAddSize > clientSize) {\n      distance = start < 0 ? offsetStart : -offsetStart;\n    }\n  }\n\n  return distance;\n}\n\nvar initialPosition = {\n  x: 0,\n  y: 0\n};\n\nvar NzImagePreviewComponent = /*@__PURE__*/function () {\n  var NzImagePreviewComponent = /*#__PURE__*/function () {\n    function NzImagePreviewComponent(cdr, nzConfigService, config, overlayRef) {\n      var _this2 = this;\n\n      _classCallCheck(this, NzImagePreviewComponent);\n\n      var _a, _b;\n\n      this.cdr = cdr;\n      this.nzConfigService = nzConfigService;\n      this.config = config;\n      this.overlayRef = overlayRef;\n      this.images = [];\n      this.index = 0;\n      this.isDragging = false;\n      this.visible = true;\n      this.animationState = 'enter';\n      this.animationStateChanged = new EventEmitter();\n      this.previewImageTransform = '';\n      this.previewImageWrapperTransform = '';\n      this.operations = [{\n        icon: 'close',\n        onClick: function onClick() {\n          _this2.onClose();\n        },\n        type: 'close'\n      }, {\n        icon: 'zoom-in',\n        onClick: function onClick() {\n          _this2.onZoomIn();\n        },\n        type: 'zoomIn'\n      }, {\n        icon: 'zoom-out',\n        onClick: function onClick() {\n          _this2.onZoomOut();\n        },\n        type: 'zoomOut'\n      }, {\n        icon: 'rotate-right',\n        onClick: function onClick() {\n          _this2.onRotateRight();\n        },\n        type: 'rotateRight'\n      }, {\n        icon: 'rotate-left',\n        onClick: function onClick() {\n          _this2.onRotateLeft();\n        },\n        type: 'rotateLeft'\n      }];\n      this.zoomOutDisabled = false;\n      this.position = Object.assign({}, initialPosition);\n      this.containerClick = new EventEmitter();\n      this.closeClick = new EventEmitter();\n      this.destroy$ = new Subject(); // TODO: move to host after View Engine deprecation\n\n      this.zoom = (_a = this.config.nzZoom) !== null && _a !== void 0 ? _a : 1;\n      this.rotate = (_b = this.config.nzRotate) !== null && _b !== void 0 ? _b : 0;\n      this.updateZoomOutDisabled();\n      this.updatePreviewImageTransform();\n      this.updatePreviewImageWrapperTransform();\n    }\n\n    _createClass(NzImagePreviewComponent, [{\n      key: \"animationDisabled\",\n      get: function get() {\n        var _a;\n\n        return (_a = this.config.nzNoAnimation) !== null && _a !== void 0 ? _a : false;\n      }\n    }, {\n      key: \"maskClosable\",\n      get: function get() {\n        var _a, _b;\n\n        var defaultConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_MODULE_NAME) || {};\n        return (_b = (_a = this.config.nzMaskClosable) !== null && _a !== void 0 ? _a : defaultConfig.nzMaskClosable) !== null && _b !== void 0 ? _b : true;\n      }\n    }, {\n      key: \"setImages\",\n      value: function setImages(images) {\n        this.images = images;\n        this.cdr.markForCheck();\n      }\n    }, {\n      key: \"switchTo\",\n      value: function switchTo(index) {\n        this.index = index;\n        this.cdr.markForCheck();\n      }\n    }, {\n      key: \"next\",\n      value: function next() {\n        if (this.index < this.images.length - 1) {\n          this.reset();\n          this.index++;\n          this.updatePreviewImageTransform();\n          this.updatePreviewImageWrapperTransform();\n          this.updateZoomOutDisabled();\n          this.cdr.markForCheck();\n        }\n      }\n    }, {\n      key: \"prev\",\n      value: function prev() {\n        if (this.index > 0) {\n          this.reset();\n          this.index--;\n          this.updatePreviewImageTransform();\n          this.updatePreviewImageWrapperTransform();\n          this.updateZoomOutDisabled();\n          this.cdr.markForCheck();\n        }\n      }\n    }, {\n      key: \"markForCheck\",\n      value: function markForCheck() {\n        this.cdr.markForCheck();\n      }\n    }, {\n      key: \"onClose\",\n      value: function onClose() {\n        this.closeClick.emit();\n      }\n    }, {\n      key: \"onZoomIn\",\n      value: function onZoomIn() {\n        this.zoom += 1;\n        this.updatePreviewImageTransform();\n        this.updateZoomOutDisabled();\n        this.position = Object.assign({}, initialPosition);\n      }\n    }, {\n      key: \"onZoomOut\",\n      value: function onZoomOut() {\n        if (this.zoom > 1) {\n          this.zoom -= 1;\n          this.updatePreviewImageTransform();\n          this.updateZoomOutDisabled();\n          this.position = Object.assign({}, initialPosition);\n        }\n      }\n    }, {\n      key: \"onRotateRight\",\n      value: function onRotateRight() {\n        this.rotate += 90;\n        this.updatePreviewImageTransform();\n      }\n    }, {\n      key: \"onRotateLeft\",\n      value: function onRotateLeft() {\n        this.rotate -= 90;\n        this.updatePreviewImageTransform();\n      }\n    }, {\n      key: \"onSwitchLeft\",\n      value: function onSwitchLeft(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.prev();\n      }\n    }, {\n      key: \"onSwitchRight\",\n      value: function onSwitchRight(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.next();\n      }\n    }, {\n      key: \"onContainerClick\",\n      value: function onContainerClick(e) {\n        if (e.target === e.currentTarget && this.maskClosable) {\n          this.containerClick.emit();\n        }\n      }\n    }, {\n      key: \"onAnimationStart\",\n      value: function onAnimationStart(event) {\n        if (event.toState === 'enter') {\n          this.setEnterAnimationClass();\n        } else if (event.toState === 'leave') {\n          this.setLeaveAnimationClass();\n        }\n\n        this.animationStateChanged.emit(event);\n      }\n    }, {\n      key: \"onAnimationDone\",\n      value: function onAnimationDone(event) {\n        if (event.toState === 'enter') {\n          this.setEnterAnimationClass();\n        } else if (event.toState === 'leave') {\n          this.setLeaveAnimationClass();\n        }\n\n        this.animationStateChanged.emit(event);\n      }\n    }, {\n      key: \"startLeaveAnimation\",\n      value: function startLeaveAnimation() {\n        this.animationState = 'leave';\n        this.cdr.markForCheck();\n      }\n    }, {\n      key: \"onDragStarted\",\n      value: function onDragStarted() {\n        this.isDragging = true;\n      }\n    }, {\n      key: \"onDragReleased\",\n      value: function onDragReleased() {\n        this.isDragging = false;\n        var width = this.imageRef.nativeElement.offsetWidth * this.zoom;\n        var height = this.imageRef.nativeElement.offsetHeight * this.zoom;\n\n        var _getOffset = getOffset(this.imageRef.nativeElement),\n            left = _getOffset.left,\n            top = _getOffset.top;\n\n        var _getClientSize = getClientSize(),\n            clientWidth = _getClientSize.width,\n            clientHeight = _getClientSize.height;\n\n        var isRotate = this.rotate % 180 !== 0;\n        var fitContentParams = {\n          width: isRotate ? height : width,\n          height: isRotate ? width : height,\n          left: left,\n          top: top,\n          clientWidth: clientWidth,\n          clientHeight: clientHeight\n        };\n        var fitContentPos = getFitContentPosition(fitContentParams);\n\n        if (isNotNil(fitContentPos.x) || isNotNil(fitContentPos.y)) {\n          this.position = Object.assign(Object.assign({}, this.position), fitContentPos);\n        }\n      }\n    }, {\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n      }\n    }, {\n      key: \"updatePreviewImageTransform\",\n      value: function updatePreviewImageTransform() {\n        this.previewImageTransform = \"scale3d(\".concat(this.zoom, \", \").concat(this.zoom, \", 1) rotate(\").concat(this.rotate, \"deg)\");\n      }\n    }, {\n      key: \"updatePreviewImageWrapperTransform\",\n      value: function updatePreviewImageWrapperTransform() {\n        this.previewImageWrapperTransform = \"translate3d(\".concat(this.position.x, \"px, \").concat(this.position.y, \"px, 0)\");\n      }\n    }, {\n      key: \"updateZoomOutDisabled\",\n      value: function updateZoomOutDisabled() {\n        this.zoomOutDisabled = this.zoom <= 1;\n      }\n    }, {\n      key: \"setEnterAnimationClass\",\n      value: function setEnterAnimationClass() {\n        if (this.animationDisabled) {\n          return;\n        }\n\n        var backdropElement = this.overlayRef.backdropElement;\n\n        if (backdropElement) {\n          backdropElement.classList.add(FADE_CLASS_NAME_MAP.enter);\n          backdropElement.classList.add(FADE_CLASS_NAME_MAP.enterActive);\n        }\n      }\n    }, {\n      key: \"setLeaveAnimationClass\",\n      value: function setLeaveAnimationClass() {\n        if (this.animationDisabled) {\n          return;\n        }\n\n        var backdropElement = this.overlayRef.backdropElement;\n\n        if (backdropElement) {\n          backdropElement.classList.add(FADE_CLASS_NAME_MAP.leave);\n          backdropElement.classList.add(FADE_CLASS_NAME_MAP.leaveActive);\n        }\n      }\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        this.zoom = 1;\n        this.rotate = 0;\n        this.position = Object.assign({}, initialPosition);\n      }\n    }]);\n\n    return NzImagePreviewComponent;\n  }();\n\n  NzImagePreviewComponent.ɵfac = function NzImagePreviewComponent_Factory(t) {\n    return new (t || NzImagePreviewComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵdirectiveInject(NzImagePreviewOptions), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.OverlayRef));\n  };\n\n  NzImagePreviewComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n    type: NzImagePreviewComponent,\n    selectors: [[\"nz-image-preview\"]],\n    viewQuery: function NzImagePreviewComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c1, 1);\n      }\n\n      if (rf & 2) {\n        var _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.imageRef = _t.first);\n      }\n    },\n    hostAttrs: [\"tabindex\", \"-1\", \"role\", \"document\"],\n    hostVars: 8,\n    hostBindings: function NzImagePreviewComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵsyntheticHostListener(\"@fadeMotion.start\", function NzImagePreviewComponent_animation_fadeMotion_start_HostBindingHandler($event) {\n          return ctx.onAnimationStart($event);\n        })(\"@fadeMotion.done\", function NzImagePreviewComponent_animation_fadeMotion_done_HostBindingHandler($event) {\n          return ctx.onAnimationDone($event);\n        });\n        ɵngcc0.ɵɵlistener(\"click\", function NzImagePreviewComponent_click_HostBindingHandler($event) {\n          return ctx.onContainerClick($event);\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵsyntheticHostProperty(\"@.disabled\", ctx.config.nzNoAnimation)(\"@fadeMotion\", ctx.animationState);\n        ɵngcc0.ɵɵstyleProp(\"z-index\", ctx.config.nzZIndex);\n        ɵngcc0.ɵɵclassProp(\"ant-image-preview-moving\", ctx.isDragging)(\"ant-image-preview-wrap\", true);\n      }\n    },\n    exportAs: [\"nzImagePreview\"],\n    decls: 10,\n    vars: 6,\n    consts: [[1, \"ant-image-preview\"], [\"tabindex\", \"0\", \"aria-hidden\", \"true\", 2, \"width\", \"0\", \"height\", \"0\", \"overflow\", \"hidden\", \"outline\", \"none\"], [1, \"ant-image-preview-content\"], [1, \"ant-image-preview-body\"], [1, \"ant-image-preview-operations\"], [\"class\", \"ant-image-preview-operations-operation\", 3, \"ant-image-preview-operations-operation-disabled\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDrag\", \"\", 1, \"ant-image-preview-img-wrapper\", 3, \"cdkDragFreeDragPosition\", \"mousedown\", \"cdkDragReleased\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"ant-image-preview-operations-operation\", 3, \"click\"], [\"nz-icon\", \"\", \"nzTheme\", \"outline\", 1, \"ant-image-preview-operations-icon\", 3, \"nzType\"], [\"cdkDragHandle\", \"\", \"class\", \"ant-image-preview-img\", 3, \"width\", \"height\", \"transform\", 4, \"ngIf\"], [\"cdkDragHandle\", \"\", 1, \"ant-image-preview-img\"], [\"imgRef\", \"\"], [1, \"ant-image-preview-switch-left\", 3, \"click\"], [\"nz-icon\", \"\", \"nzType\", \"left\", \"nzTheme\", \"outline\"], [1, \"ant-image-preview-switch-right\", 3, \"click\"], [\"nz-icon\", \"\", \"nzType\", \"right\", \"nzTheme\", \"outline\"]],\n    template: function NzImagePreviewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelement(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(4, \"ul\", 4);\n        ɵngcc0.ɵɵtemplate(5, NzImagePreviewComponent_li_5_Template, 2, 3, \"li\", 5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"div\", 6);\n        ɵngcc0.ɵɵlistener(\"mousedown\", function NzImagePreviewComponent_Template_div_mousedown_6_listener() {\n          return ctx.onDragStarted();\n        })(\"cdkDragReleased\", function NzImagePreviewComponent_Template_div_cdkDragReleased_6_listener() {\n          return ctx.onDragReleased();\n        });\n        ɵngcc0.ɵɵtemplate(7, NzImagePreviewComponent_ng_container_7_Template, 2, 1, \"ng-container\", 7);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(8, NzImagePreviewComponent_ng_container_8_Template, 5, 4, \"ng-container\", 8);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(9, \"div\", 1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.operations);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵstyleProp(\"transform\", ctx.previewImageWrapperTransform);\n        ɵngcc0.ɵɵproperty(\"cdkDragFreeDragPosition\", ctx.position);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.images);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.images.length > 1);\n      }\n    },\n    directives: [ɵngcc3.NgForOf, ɵngcc4.CdkDrag, ɵngcc3.NgIf, ɵngcc5.NzIconDirective, ɵngcc4.CdkDragHandle],\n    encapsulation: 2,\n    data: {\n      animation: [fadeMotion]\n    },\n    changeDetection: 0\n  });\n  return NzImagePreviewComponent;\n}();\n\nvar NzImageService = /*@__PURE__*/function () {\n  var NzImageService = /*#__PURE__*/function () {\n    function NzImageService(overlay, injector, nzConfigService, directionality) {\n      _classCallCheck(this, NzImageService);\n\n      this.overlay = overlay;\n      this.injector = injector;\n      this.nzConfigService = nzConfigService;\n      this.directionality = directionality;\n    }\n\n    _createClass(NzImageService, [{\n      key: \"preview\",\n      value: function preview(images, options) {\n        return this.display(images, options);\n      }\n    }, {\n      key: \"display\",\n      value: function display(images, config) {\n        var configMerged = Object.assign(Object.assign({}, new NzImagePreviewOptions()), config !== null && config !== void 0 ? config : {});\n        var overlayRef = this.createOverlay(configMerged);\n        var previewComponent = this.attachPreviewComponent(overlayRef, configMerged);\n        previewComponent.setImages(images);\n        var previewRef = new NzImagePreviewRef(previewComponent, configMerged, overlayRef);\n        previewComponent.previewRef = previewRef;\n        return previewRef;\n      }\n    }, {\n      key: \"attachPreviewComponent\",\n      value: function attachPreviewComponent(overlayRef, config) {\n        var injector = Injector.create({\n          parent: this.injector,\n          providers: [{\n            provide: OverlayRef,\n            useValue: overlayRef\n          }, {\n            provide: NzImagePreviewOptions,\n            useValue: config\n          }]\n        });\n        var containerPortal = new ComponentPortal(NzImagePreviewComponent, null, injector);\n        var containerRef = overlayRef.attach(containerPortal);\n        return containerRef.instance;\n      }\n    }, {\n      key: \"createOverlay\",\n      value: function createOverlay(config) {\n        var _a, _b;\n\n        var globalConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_MODULE_NAME) || {};\n        var overLayConfig = new OverlayConfig({\n          hasBackdrop: true,\n          scrollStrategy: this.overlay.scrollStrategies.block(),\n          positionStrategy: this.overlay.position().global(),\n          disposeOnNavigation: (_b = (_a = config.nzCloseOnNavigation) !== null && _a !== void 0 ? _a : globalConfig.nzCloseOnNavigation) !== null && _b !== void 0 ? _b : true,\n          backdropClass: IMAGE_PREVIEW_MASK_CLASS_NAME,\n          direction: config.nzDirection || globalConfig.nzDirection || this.directionality.value\n        });\n        return this.overlay.create(overLayConfig);\n      }\n    }]);\n\n    return NzImageService;\n  }();\n\n  NzImageService.ɵfac = function NzImageService_Factory(t) {\n    return new (t || NzImageService)(ɵngcc0.ɵɵinject(ɵngcc2.Overlay), ɵngcc0.ɵɵinject(ɵngcc0.Injector), ɵngcc0.ɵɵinject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵinject(ɵngcc6.Directionality, 8));\n  };\n\n  NzImageService.ɵprov = ɵngcc0.ɵɵdefineInjectable({\n    token: NzImageService,\n    factory: NzImageService.ɵfac\n  });\n  return NzImageService;\n}();\n\nvar NZ_CONFIG_MODULE_NAME$1 = 'image';\n\nvar NzImageDirective = /*@__PURE__*/function () {\n  var NzImageDirective = /*#__PURE__*/function () {\n    function NzImageDirective(document, nzConfigService, elementRef, nzImageService, cdr, parentGroup, directionality) {\n      _classCallCheck(this, NzImageDirective);\n\n      this.document = document;\n      this.nzConfigService = nzConfigService;\n      this.elementRef = elementRef;\n      this.nzImageService = nzImageService;\n      this.cdr = cdr;\n      this.parentGroup = parentGroup;\n      this.directionality = directionality;\n      this._nzModuleName = NZ_CONFIG_MODULE_NAME$1;\n      this.nzSrc = '';\n      this.nzDisablePreview = false;\n      this.nzFallback = null;\n      this.nzPlaceholder = null;\n      this.status = 'normal';\n      this.destroy$ = new Subject();\n    }\n\n    _createClass(NzImageDirective, [{\n      key: \"previewable\",\n      get: function get() {\n        return !this.nzDisablePreview && this.status !== 'error';\n      }\n    }, {\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this3 = this;\n\n        var _a;\n\n        this.backLoad();\n\n        if (this.parentGroup) {\n          this.parentGroup.addImage(this);\n        }\n\n        if (this.directionality) {\n          (_a = this.directionality.change) === null || _a === void 0 ? void 0 : _a.pipe(takeUntil(this.destroy$)).subscribe(function (direction) {\n            _this3.dir = direction;\n\n            _this3.cdr.detectChanges();\n          });\n          this.dir = this.directionality.value;\n        }\n      }\n    }, {\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n      }\n    }, {\n      key: \"onPreview\",\n      value: function onPreview() {\n        var _this4 = this;\n\n        if (!this.previewable) {\n          return;\n        }\n\n        if (this.parentGroup) {\n          // preview inside image group\n          var previewAbleImages = this.parentGroup.images.filter(function (e) {\n            return e.previewable;\n          });\n          var previewImages = previewAbleImages.map(function (e) {\n            return {\n              src: e.nzSrc\n            };\n          });\n          var previewIndex = previewAbleImages.findIndex(function (el) {\n            return _this4 === el;\n          });\n          var previewRef = this.nzImageService.preview(previewImages, {\n            nzDirection: this.dir\n          });\n          previewRef.switchTo(previewIndex);\n        } else {\n          // preview not inside image group\n          var _previewImages = [{\n            src: this.nzSrc\n          }];\n          this.nzImageService.preview(_previewImages, {\n            nzDirection: this.dir\n          });\n        }\n      }\n    }, {\n      key: \"getElement\",\n      value: function getElement() {\n        return this.elementRef;\n      }\n    }, {\n      key: \"ngOnChanges\",\n      value: function ngOnChanges(changes) {\n        var nzSrc = changes.nzSrc;\n\n        if (nzSrc) {\n          this.getElement().nativeElement.src = nzSrc.currentValue;\n          this.backLoad();\n        }\n      }\n      /**\n       * use internal Image object handle fallback & placeholder\n       * @private\n       */\n\n    }, {\n      key: \"backLoad\",\n      value: function backLoad() {\n        var _this5 = this;\n\n        this.backLoadImage = this.document.createElement('img');\n        this.backLoadImage.src = this.nzSrc;\n        this.status = 'loading';\n\n        if (this.backLoadImage.complete) {\n          this.status = 'normal';\n          this.getElement().nativeElement.src = this.nzSrc;\n        } else {\n          if (this.nzPlaceholder) {\n            this.getElement().nativeElement.src = this.nzPlaceholder;\n          } else {\n            this.getElement().nativeElement.src = this.nzSrc;\n          }\n\n          this.backLoadImage.onload = function () {\n            _this5.status = 'normal';\n            _this5.getElement().nativeElement.src = _this5.nzSrc;\n          };\n\n          this.backLoadImage.onerror = function () {\n            _this5.status = 'error';\n\n            if (_this5.nzFallback) {\n              _this5.getElement().nativeElement.src = _this5.nzFallback;\n            }\n          };\n        }\n      }\n    }]);\n\n    return NzImageDirective;\n  }();\n\n  NzImageDirective.ɵfac = function NzImageDirective_Factory(t) {\n    return new (t || NzImageDirective)(ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NzImageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NzImageGroupComponent, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc6.Directionality, 8));\n  };\n\n  NzImageDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({\n    type: NzImageDirective,\n    selectors: [[\"img\", \"nz-image\", \"\"]],\n    hostBindings: function NzImageDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NzImageDirective_click_HostBindingHandler() {\n          return ctx.onPreview();\n        });\n      }\n    },\n    inputs: {\n      nzSrc: \"nzSrc\",\n      nzDisablePreview: \"nzDisablePreview\",\n      nzFallback: \"nzFallback\",\n      nzPlaceholder: \"nzPlaceholder\"\n    },\n    exportAs: [\"nzImage\"],\n    features: [ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n\n  __decorate([InputBoolean(), WithConfig(), __metadata(\"design:type\", Boolean)], NzImageDirective.prototype, \"nzDisablePreview\", void 0);\n\n  __decorate([WithConfig(), __metadata(\"design:type\", Object)], NzImageDirective.prototype, \"nzFallback\", void 0);\n\n  __decorate([WithConfig(), __metadata(\"design:type\", Object)], NzImageDirective.prototype, \"nzPlaceholder\", void 0);\n\n  return NzImageDirective;\n}();\n\nvar NzImageModule = /*@__PURE__*/function () {\n  var NzImageModule = function NzImageModule() {\n    _classCallCheck(this, NzImageModule);\n  };\n\n  NzImageModule.ɵfac = function NzImageModule_Factory(t) {\n    return new (t || NzImageModule)();\n  };\n\n  NzImageModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({\n    type: NzImageModule\n  });\n  NzImageModule.ɵinj = ɵngcc0.ɵɵdefineInjector({\n    providers: [NzImageService],\n    imports: [[BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule]]\n  });\n  return NzImageModule;\n}();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NzImageModule, {\n    declarations: function declarations() {\n      return [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent];\n    },\n    imports: function imports() {\n      return [BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule];\n    },\n    exports: function exports() {\n      return [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent];\n    }\n  });\n})();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { FADE_CLASS_NAME_MAP, IMAGE_PREVIEW_MASK_CLASS_NAME, NZ_CONFIG_MODULE_NAME, NzImageDirective, NzImageGroupComponent, NzImageModule, NzImagePreviewComponent, NzImagePreviewOptions, NzImagePreviewRef, NzImageService, getClientSize, getFitContentPosition, getOffset }; //# sourceMappingURL=ng-zorro-antd-image.js.map","map":null,"metadata":{},"sourceType":"module"}